---
title: "Criando um tema personalizado para o ZSH"
date: '2022-08-02'
language: pt
tags: ['zsh', 'bash']
images: ['/static/blog/creating-a-zsh-theme.webp']
authors: ['andrevieira']
draft: false
layout: PostBanner
summary: "Aprenda como criar seu pr√≥prio tema para usar no terminal com o ZSH."
canonicalUrl: https://andreluizv.dev.br/pt/blog/creating-a-zsh-theme
---

Aprenda como criar seu pr√≥prio tema para usar no terminal com o ZSH.

## Antes de come√ßarmos
Para que este artigo fa√ßa algum sentido voc√™ precisa saber o que √© o [ZSH](https://www.zsh.org/) e como instalar em sua m√°quina. Utilizaremos tamb√©m o [OHMYZSH](https://ohmyz.sh/), uma ferramenta espec√≠fica para personalizar seu terminal ZSH.

## ~/.oh-my-zsh
Neste diret√≥rio de sua m√°quina, voc√™ ir√° encontrar todas as informa√ß√µes importantes para configurar e personalizar seu terminal com oh-my-zsh. Na pasta `~/.oh-my-zsh/themes` voc√™ encontrar√° todos os temas j√° existentes.

Crie um arquivo com o nome do seu tema nesta pasta, no meu exemplo, criarei um tema com o nome `omni-theme.zsh-theme`. 
**IMPORTANTE!**: √â necess√°rio que estes temas sejam criados com a extens√£o `.zsh-theme` para darem certo. Voc√™ pode tamb√©m abrir esta pasta em sua IDE preferida.

Iniciaremos colocando as propriedades PROMPT e RPROMPT que, respectivamente, ir√£o mostrar o que est√° na esquerda e direta do nosso terminal.


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-1.webp"
        alt="Criando um tema personalizado para o ZSH: cria√ß√£o do novo tema"
        width={600}
        height={550}
    />
</div>


Para voc√™ conseguir visualizar seu novo tema basta abrir em seu editor de c√≥digo o arquivo `~/.zshrc` e procurar pela op√ß√£o `ZSH_THEME` e colocar seu tema ali, como mostra na imagem abaixo:


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-2.webp"
        alt="Criando um tema personalizado para o ZSH: Adicionando o novo tema no .zshrc"
        width={600}
        height={550}
    />
</div>


Agora para ver o resultado rode o comando `source .zshrc` e seu terminal estar√° de cara nova!


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-3.webp"
        alt="Criando um tema personalizado para o ZSH: Visualizando o novo tema"
        width={600}
        height={550}
    />
</div>

## Adicionando fun√ß√µes
√â poss√≠vel adicionar fun√ß√µes na chave PROMPT do nosso tema, como mostrado abaixo.


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-4.webp"
        alt="Criando um tema personalizado para o ZSH: Adicionando fun√ß√µes"
        width={600}
        height={550}
    />
</div>

O resultado ser√° o seguinte:


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-5.webp"
        alt="Criando um tema personalizado para o ZSH: resultado do tema com fun√ß√µes"
        width={600}
        height={550}
    />
</div>

Cores no terminal
As cores de texto no prompt s√£o definidas _inline_ como abaixo:

``` bash
PROMPT='the following word will be %{$fg[cyan]%}cyan%{$reset_color%}!'
```

Repare que no fim da linha tem um `{$reset_color%}` importante para que a cor destacada pare por ali, veja abaixo a diferen√ßa de usar ou n√£o essa propriedade.


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-6.webp"
        alt="Criando um tema personalizado para o ZSH: Validando cores no tema personalizado do zsh"
        width={600}
        height={550}
    />
</div>

Se voc√™ n√£o informar o reset da cor ent√£o ele entende que tudo a partir daquele ponto deve conter a cor informada, como abaixo.


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-7.webp"
        alt="Criando um tema personalizado para o ZSH: sem cor aplicada no tema"
        width={600}
        height={550}
    />
</div>

O `oh-my-zsh` suporta as seguintes cores para personaliza√ß√£o:

- Black
- Red
- Green
- Yellow
- Blue
- Magenta
- Cyan
- White

Mas tamb√©m √© poss√≠vel ver outras 256 possibilidades com o comando `spectrum_ls` que ir√° te retornar algo parecido com o seguinte.


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-8.webp"
        alt="Criando um tema personalizado para o ZSH: Cores dispon√≠veis para cria√ß√£o de temas"
        width={600}
        height={550}
    />
</div>

Para utilizar essa maior variedade de cores basta seguir conforme o que voc√™ quer estilizar.

- $FG[000] para mudar cor de textos com valor num√©rico
- $fg[black] para mudar cor de textos com valores em string, com as op√ß√µes mencionadas anteriormente
- $BG[000] para mudar cor de fundo com valor n√∫mero
- $bg[black] para mudar cor de fundo com valores em string, com as op√ß√µes mencionadas anteriormente

**IMPORTANTE**: Repare na diferen√ßa entre os caracteres mai√∫sculos e min√∫sculos.

### Resetando cores
Al√©m do `{$reset_color%}` mostrado anteriormente, que serve tanto para redefinir textos e fundos, voc√™ pode usar `%f` para redefini√ß√£o de cores de textos enquanto `%k` para cores de fundo.

## Utilizando √≠cones
Caso voc√™ seja mais extravagante em seu gosto por temas, voc√™ pode adicionar √≠cones diretamente na configura√ß√£o ou por hexadecimais.

``` bash
PROMPT='My icon here \u2b50 and here üôÇ '
```

<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-9.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o de tema com √≠cone"
        width={600}
        height={550}
    />
</div>

## A diferen√ßa entre aspas e quebras de linhas
De forma simples e clara, utilizando aspas simples voc√™ consegue manter a formata√ß√£o do jeito que est√° no c√≥digo, enquanto, com aspas duplas, essa formata√ß√£o se perde.

Dito isso, podemos agora criar quebras de linha para separar o que est√° sendo escrito daquilo que voc√™ quer exibir de informa√ß√£o do usu√°rio.

``` bash
PROMPT='‚ï≠$(git_prompt_info)
‚ï∞‚Üí '
```

O c√≥digo acima ir√° gerar a seguinte estiliza√ß√£o:

<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-10.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o de tema com quebra de linhas"
        width={600}
        height={550}
    />
</div>

Tamb√©m √© poss√≠vel misturar tudo que vimos sobre cores aqui:

``` bash
PROMPT='%{$bg[green]%}%{$FG[0]%}‚ï≠$(git_prompt_info)%E%{$reset_color%}
‚ï∞‚Üí '
```

O c√≥digo acima ir√° gerar a seguinte estiliza√ß√£o:

<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-11.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o de tema com cores e quebra de linhas"
        width={600}
        height={550}
    />
</div>

## Estilizando fontes do seu tema
Seguindo o conceito de abrir e fechar uma estiliza√ß√£o, como vimos ser feita com as cores, podemos tamb√©m melhorar a apresenta√ß√£o das fontes do terminal com os seguintes padr√µes:

- %B ‚Äî Inicia negrito
- %b ‚Äî Termina negrito
- %U ‚Äî Inicia underline
- %u ‚Äî Termina underline
- %S ‚Äî Inicia destaque
- %s ‚Äî Termina destaque

Veja um exemplo para aplicar:

``` bash
PROMPT='%BThis%b is %Umy%u %Sstyled prompt%s!'
```

<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-12.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o do tema com fontes personalizadas"
        width={600}
        height={550}
    />
</div>

## Vari√°veis do prompt
Com vari√°veis podemos come√ßar a colocar nossos dados com base no ambiente ao qual estamos. Aqui podemos ver uma tabela com as vari√°veis que podemos utilizar.

### Vari√°veis de diret√≥rio
%0 ‚Äî Retorna toda a estrutura de diret√≥rios atual

Exemplo: _Users/admin/projetos/my-project_

%1 ‚Äî Retorna o diret√≥rio atual

Exemplo: _projetos/_

%2 ‚Äî Retorna o diret√≥rio pai seguido do atual

Exemplo: _projetos/my-project_

### Vari√°veis de tempo
%t ‚Äî Retorna o hor√°rio atual no formato 12-horas am/pm

Exemplo: _09:00AM_

%T ‚Äî Retorna o hor√°rio atual no formato 24-horas

Exemplo: _09:00_

%* ‚Äî Retorna o hor√°rio atual no formato 24-horas com segundos

Exemplo: _09:00:00_

## Status de um comando‚ùóÔ∏è‚úÖ
Com a vari√°vel `%?` conseguimos capturar se o seu comando foi v√°lido ou n√£o, e deixar isso bem vis√≠vel e claro no terminal. Para isso, usamos da seguinte forma `x.condi√ß√£o-verdadeira.condi√ß√£o-falsa`, como mostrado a seguir:

``` bash
RPROMPT='%(?.‚úÖ.‚ùóÔ∏è)'
```

<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-13.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o de tema com status de comando"
        width={600}
        height={550}
    />
</div>

## Inserindo informa√ß√µes do GIT
Utilizando a fun√ß√£o `$(git_prompt_info)` temos o retorno `git:(master*)`, mas isso tamb√©m nos retorna v√°rias outras informa√ß√µes e op√ß√µes que podemos utilizar para mostrar em tela dados do reposit√≥rio GIT atual.

### ZSH_THEME_GIT_PROMPT_PREFIX
O valor ou caractere para ser inserido ANTES da informa√ß√£o gerada pela fun√ß√£o do GIT.

### ZSH_THEME_GIT_PROMPT_SUFFIX
O valor ou caractere para ser inserido DEPOIS da informa√ß√£o gerada pela fun√ß√£o do GIT.

### ZSH_THEME_GIT_PROMPT_DIRTY
O valor ou caractere que ser√° informado em tela quando voc√™ tiver arquivos para serem commitados.

### ZSH_THEME_GIT_PROMPT_CLEAN
O valor ou caractere que ser√° informado em tela quando voc√™ N√ÉO tiver arquivos para serem commitados.

Veja o exemplo abaixo e, logo em seguida, o que ser√° retornado.

Observa√ß√£o: Estes comandos do ZSH n√£o funcionar√£o sem a fun√ß√£o `$(git_prompt_info)` ser invocada.

``` bash
PROMPT='$(git_prompt_info)'
ZSH_THEME_GIT_PROMPT_PREFIX="("
ZSH_THEME_GIT_PROMPT_SUFFIX=")"
ZSH_THEME_GIT_PROMPT_DIRTY="üí•"
ZSH_THEME_GIT_PROMPT_CLEAN="ü•±"
```


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-14.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o de tema com informa√ß√µes do GIT"
        width={600}
        height={550}
    />
</div>

## Dados do usu√°rio GIT
A fun√ß√£o `$(git_current_user_name)` nos permite recuperar o nome do nosso usu√°rio GIT e exibir em tela da seguinte maneira:


<div align='center'>
    <Image
        src="/static/blog/creating-a-zsh-theme-15.webp"
        alt="Criando um tema personalizado para o ZSH: Exibi√ß√£o de tema com dados do usu√°rio GIT"
        width={600}
        height={550}
    />
</div>

Ainda h√° a possibilidade de capturar o email do git tamb√©m com a fun√ß√£o `$(git_current_user_email)`.

Conclus√£o
Ufa! Foi muita coisa para um artigo s√≥, mas agora voc√™ consegue criar seus pr√≥prios temas do ZSH segundo a sua necessidade ou imagina√ß√£o. Uma dica bem legal que deixo √© come√ßar a explorar os temas j√° existentes e fazer as altera√ß√µes nestes arquivos j√° criados, tanto para maior compreens√£o, quanto para maior aproveito do que foi desenvolvido pela comunidade, mas caso prefira, agora voc√™ tamb√©m pode criar seu tema do absoluto zero!

Se esse post foi √∫til de alguma forma pe√ßo que me siga e salve esse post.

At√© mais! üòÅ